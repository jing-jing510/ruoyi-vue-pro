# 备件使用记录跳转调试方案

## 问题分析

根据您提供的数据，我发现了以下情况：

### 数据对应情况：
**检修单数据**：
- ID 1: 设备ID=10, 报修单ID=1
- ID 2: 设备ID=10, 报修单ID=1  
- ID 7: 设备ID=5, 计划ID=6
- ID 8: 设备ID=5, 计划ID=6
- ID 9: 设备ID=1, 计划ID=1
- ID 10: 设备ID=1, 报修单ID=1
- ID 11: 设备ID=2, 报修单ID=2
- ID 12: 设备ID=5, 报修单ID=5
- ID 13: 设备ID=3, 计划ID=4

**备件使用记录数据**：
- ID 3: 设备ID=1, 工单ID=1 ✅ (对应检修单ID 1)
- ID 4: 设备ID=2, 工单ID=2 ✅ (对应检修单ID 2)  
- ID 5: 设备ID=3, 工单ID=12 ✅ (对应检修单ID 12)
- ID 6: 设备ID=3, 工单ID=1 ✅ (对应检修单ID 1)
- ID 7: 设备ID=2, 工单ID=9 ❌ (检修单ID 9不存在)
- ID 8: 设备ID=1, 工单ID=12 ✅ (对应检修单ID 12)

## 调试方案

我已经在代码中添加了调试信息，现在请按以下步骤测试：

### 1. 测试步骤
1. 打开浏览器开发者工具的控制台
2. 进入检修单列表页面
3. 点击任意检修单的"备件使用记录"按钮
4. 观察控制台输出

### 2. 预期控制台输出
**检修单页面**：
```
跳转到备件使用记录页面，检修单ID: [ID] 设备ID: [设备ID]
```

**备件使用记录页面**：
```
备件使用记录页面接收到的查询参数: {workOrderId: "[ID]", equipmentId: "[设备ID]"}
设置工单ID: [ID]
设置设备ID: [设备ID]
查询备件使用记录，参数: {workOrderId: [ID], equipmentId: [设备ID], ...}
查询结果: {list: [...], total: [数量]}
```

### 3. 可能的问题和解决方案

#### 问题1: 路由跳转失败
**现象**: 没有跳转到备件使用记录页面
**原因**: 路由路径错误或页面不存在
**解决**: 检查路由配置

#### 问题2: 参数传递失败
**现象**: 跳转成功但控制台显示参数为空
**原因**: 参数传递有问题
**解决**: 检查 `maintenanceOrder` 对象的数据结构

#### 问题3: 查询无结果
**现象**: 参数正确但查询结果为空
**原因**: 数据库中没有匹配的数据
**解决**: 检查数据关联关系

#### 问题4: 设备ID不匹配
**现象**: 工单ID匹配但设备ID不匹配
**原因**: 备件使用记录中的设备ID与检修单中的设备ID不一致
**解决**: 更新数据或调整查询逻辑

## 测试建议

### 测试用例1: 检修单ID=1
- 检修单ID=1, 设备ID=10
- 应该找到备件使用记录ID=3和ID=6（工单ID=1）
- 但设备ID不匹配（备件使用记录中设备ID=1和3，检修单中设备ID=10）

### 测试用例2: 检修单ID=2  
- 检修单ID=2, 设备ID=10
- 应该找到备件使用记录ID=4（工单ID=2）
- 但设备ID不匹配（备件使用记录中设备ID=2，检修单中设备ID=10）

### 测试用例3: 检修单ID=12
- 检修单ID=12, 设备ID=5
- 应该找到备件使用记录ID=5和ID=8（工单ID=12）
- 设备ID部分匹配（备件使用记录中设备ID=3和1，检修单中设备ID=5）

## 数据修复建议

如果确认是数据不匹配问题，可以执行以下SQL修复：

```sql
-- 修复备件使用记录中的设备ID，使其与检修单匹配
UPDATE coal_spare_part_usage_record 
SET equipment_id = 10 
WHERE work_order_id = 1;

UPDATE coal_spare_part_usage_record 
SET equipment_id = 10 
WHERE work_order_id = 2;

UPDATE coal_spare_part_usage_record 
SET equipment_id = 5 
WHERE work_order_id = 12;
```

## 下一步

请按照测试步骤进行测试，并将控制台输出结果告诉我，这样我就能准确定位问题所在。
