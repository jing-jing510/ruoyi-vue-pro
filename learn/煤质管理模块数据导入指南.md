# ç…¤è´¨ç®¡ç†æ¨¡å—æ•°æ®å¯¼å…¥æŒ‡å—

## ğŸ“‹ å¯¼å…¥å‰å‡†å¤‡

### 1. æ•°æ®åº“ç¯å¢ƒæ£€æŸ¥
- ç¡®ä¿MySQLæ•°æ®åº“å·²å¯åŠ¨
- ç¡®ä¿æ•°æ®åº“ç”¨æˆ·æœ‰è¶³å¤Ÿçš„æƒé™
- ç¡®ä¿ç›®æ ‡æ•°æ®åº“å·²åˆ›å»º

### 2. è¡¨ç»“æ„æ£€æŸ¥
ç¡®ä¿ä»¥ä¸‹è¡¨å·²åˆ›å»ºï¼š
- `coal_quality_item` - è´¨é‡æ£€æµ‹é¡¹ç›®è¡¨
- `coal_quality_standard` - è´¨é‡æ ‡å‡†è¡¨
- `coal_quality_inspection` - è´¨é‡æ£€æµ‹è®°å½•è¡¨
- `coal_quality_data` - è´¨é‡æ£€æµ‹æ•°æ®è¡¨
- `coal_quality_alert` - è´¨é‡é¢„è­¦è®°å½•è¡¨

### 3. å­—å…¸æ•°æ®æ£€æŸ¥
ç¡®ä¿ä»¥ä¸‹å­—å…¸ç±»å‹å·²é…ç½®ï¼š
- `coal_quality_item_type` - æ£€æµ‹é¡¹ç›®ç±»å‹
- `coal_quality_product_type` - äº§å“ç±»å‹
- `coal_quality_product_spec` - äº§å“è§„æ ¼
- `coal_quality_sampling_method` - é‡‡æ ·æ–¹æ³•
- `coal_quality_detection_type` - æ£€æµ‹ç±»å‹
- `coal_quality_inspection_status` - æ£€æµ‹çŠ¶æ€
- `coal_quality_review_status` - å®¡æ ¸çŠ¶æ€
- `coal_quality_qualified` - æ˜¯å¦åˆæ ¼
- `coal_quality_recheck` - æ˜¯å¦å¤æ£€
- `coal_quality_standard_type` - æ ‡å‡†ç±»å‹
- `coal_quality_standard_status` - æ ‡å‡†çŠ¶æ€
- `coal_quality_alert_type` - é¢„è­¦ç±»å‹
- `coal_quality_alert_level` - é¢„è­¦çº§åˆ«
- `coal_quality_alert_status` - é¢„è­¦çŠ¶æ€
- `coal_quality_auto_alert` - æ˜¯å¦è‡ªåŠ¨é¢„è­¦
- `coal_quality_notification_sent` - æ˜¯å¦å·²å‘é€é€šçŸ¥

## ğŸš€ æ•°æ®å¯¼å…¥æ­¥éª¤

### æ­¥éª¤1ï¼šå¯¼å…¥åŸºç¡€æ•°æ®
```sql
-- 1. å¯¼å…¥è´¨é‡æ£€æµ‹é¡¹ç›®æ•°æ®
-- æ‰§è¡Œ coal_quality_item è¡¨çš„ INSERT è¯­å¥

-- 2. å¯¼å…¥è´¨é‡æ ‡å‡†æ•°æ®
-- æ‰§è¡Œ coal_quality_standard è¡¨çš„ INSERT è¯­å¥
```

### æ­¥éª¤2ï¼šå¯¼å…¥ä¸šåŠ¡æ•°æ®
```sql
-- 3. å¯¼å…¥è´¨é‡æ£€æµ‹è®°å½•æ•°æ®
-- æ‰§è¡Œ coal_quality_inspection è¡¨çš„ INSERT è¯­å¥

-- 4. å¯¼å…¥è´¨é‡æ£€æµ‹æ•°æ®
-- æ‰§è¡Œ coal_quality_data è¡¨çš„ INSERT è¯­å¥

-- 5. å¯¼å…¥è´¨é‡é¢„è­¦è®°å½•æ•°æ®
-- æ‰§è¡Œ coal_quality_alert è¡¨çš„ INSERT è¯­å¥
```

### æ­¥éª¤3ï¼šéªŒè¯æ•°æ®å¯¼å…¥
```sql
-- æ£€æŸ¥å„è¡¨æ•°æ®é‡
SELECT 'coal_quality_item' as table_name, COUNT(*) as count FROM coal_quality_item
UNION ALL
SELECT 'coal_quality_standard', COUNT(*) FROM coal_quality_standard
UNION ALL
SELECT 'coal_quality_inspection', COUNT(*) FROM coal_quality_inspection
UNION ALL
SELECT 'coal_quality_data', COUNT(*) FROM coal_quality_data
UNION ALL
SELECT 'coal_quality_alert', COUNT(*) FROM coal_quality_alert;
```

## ğŸ” æ•°æ®éªŒè¯

### 1. åŸºç¡€æ•°æ®éªŒè¯
```sql
-- éªŒè¯æ£€æµ‹é¡¹ç›®æ•°æ®
SELECT * FROM coal_quality_item WHERE deleted = 0;

-- éªŒè¯è´¨é‡æ ‡å‡†æ•°æ®
SELECT * FROM coal_quality_standard WHERE deleted = 0;
```

### 2. ä¸šåŠ¡æ•°æ®éªŒè¯
```sql
-- éªŒè¯æ£€æµ‹è®°å½•æ•°æ®
SELECT 
    inspection_code,
    inspection_date,
    inspector_name,
    product_type,
    inspection_status,
    review_status
FROM coal_quality_inspection 
WHERE deleted = 0
ORDER BY inspection_date DESC;

-- éªŒè¯æ£€æµ‹æ•°æ®
SELECT 
    qd.measured_value,
    qd.standard_value,
    qd.deviation,
    qd.is_qualified,
    qi.item_name,
    qi.inspection_code
FROM coal_quality_data qd
JOIN coal_quality_inspection qi ON qd.inspection_id = qi.id
WHERE qd.deleted = 0
ORDER BY qd.detection_time DESC;

-- éªŒè¯é¢„è­¦è®°å½•æ•°æ®
SELECT 
    alert_code,
    alert_type,
    alert_level,
    alert_message,
    alert_status,
    handler_name
FROM coal_quality_alert 
WHERE deleted = 0
ORDER BY alert_time DESC;
```

### 3. æ•°æ®å…³è”éªŒè¯
```sql
-- éªŒè¯æ£€æµ‹è®°å½•ä¸æ£€æµ‹æ•°æ®çš„å…³è”
SELECT 
    qi.inspection_code,
    qi.inspection_date,
    qi.inspector_name,
    COUNT(qd.id) as data_count
FROM coal_quality_inspection qi
LEFT JOIN coal_quality_data qd ON qi.id = qd.inspection_id
WHERE qi.deleted = 0
GROUP BY qi.id, qi.inspection_code, qi.inspection_date, qi.inspector_name
ORDER BY qi.inspection_date DESC;

-- éªŒè¯é¢„è­¦è®°å½•ä¸æ£€æµ‹æ•°æ®çš„å…³è”
SELECT 
    qa.alert_code,
    qa.alert_message,
    qi.inspection_code,
    qd.measured_value,
    qd.standard_value
FROM coal_quality_alert qa
JOIN coal_quality_inspection qi ON qa.inspection_id = qi.id
JOIN coal_quality_data qd ON qi.id = qd.inspection_id
WHERE qa.deleted = 0
ORDER BY qa.alert_time DESC;
```

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. æ•°æ®å†²çªå¤„ç†
- å¦‚æœè¡¨ä¸­å·²å­˜åœ¨ç›¸åŒIDçš„æ•°æ®ï¼Œå¯¼å…¥ä¼šå¤±è´¥
- å»ºè®®å…ˆæ¸…ç©ºè¡¨æ•°æ®å†å¯¼å…¥ï¼Œæˆ–ä¿®æ”¹IDå€¼
- æ³¨æ„å¤–é”®çº¦æŸï¼Œç¡®ä¿å…³è”æ•°æ®å­˜åœ¨

### 2. æ—¶é—´æ ¼å¼å¤„ç†
- ç¡®ä¿æ•°æ®åº“æ—¶åŒºè®¾ç½®æ­£ç¡®
- æ³¨æ„æ—¶é—´æ ¼å¼çš„å…¼å®¹æ€§
- éªŒè¯æ—¶é—´æ•°æ®çš„å‡†ç¡®æ€§

### 3. å­—ç¬¦ç¼–ç å¤„ç†
- ç¡®ä¿æ•°æ®åº“å­—ç¬¦é›†ä¸ºutf8mb4
- æ³¨æ„ä¸­æ–‡å­—ç¬¦çš„æ­£ç¡®æ˜¾ç¤º
- éªŒè¯ç‰¹æ®Šå­—ç¬¦çš„å¤„ç†

## ğŸ”§ å¸¸è§é—®é¢˜è§£å†³

### é—®é¢˜1ï¼šå¯¼å…¥å¤±è´¥ï¼Œæç¤ºä¸»é”®å†²çª
**è§£å†³æ–¹æ¡ˆ**ï¼š
```sql
-- æ¸…ç©ºè¡¨æ•°æ®
TRUNCATE TABLE coal_quality_alert;
TRUNCATE TABLE coal_quality_data;
TRUNCATE TABLE coal_quality_inspection;
TRUNCATE TABLE coal_quality_standard;
TRUNCATE TABLE coal_quality_item;

-- é‡æ–°å¯¼å…¥æ•°æ®
```

### é—®é¢˜2ï¼šå¯¼å…¥å¤±è´¥ï¼Œæç¤ºå¤–é”®çº¦æŸé”™è¯¯
**è§£å†³æ–¹æ¡ˆ**ï¼š
```sql
-- æ£€æŸ¥å…³è”æ•°æ®æ˜¯å¦å­˜åœ¨
SELECT COUNT(*) FROM coal_quality_item WHERE id IN (1,2,3,4,5,6,7);
SELECT COUNT(*) FROM coal_quality_standard WHERE id IN (1,2,3,4,5,6,7,8);

-- å¦‚æœä¸å­˜åœ¨ï¼Œå…ˆå¯¼å…¥åŸºç¡€æ•°æ®
```

### é—®é¢˜3ï¼šä¸­æ–‡å­—ç¬¦æ˜¾ç¤ºä¹±ç 
**è§£å†³æ–¹æ¡ˆ**ï¼š
```sql
-- æ£€æŸ¥æ•°æ®åº“å­—ç¬¦é›†
SHOW VARIABLES LIKE 'character_set%';

-- è®¾ç½®æ­£ç¡®çš„å­—ç¬¦é›†
SET NAMES utf8mb4;
```

### é—®é¢˜4ï¼šæ—¶é—´æ•°æ®æ ¼å¼é”™è¯¯
**è§£å†³æ–¹æ¡ˆ**ï¼š
```sql
-- æ£€æŸ¥æ—¶é—´æ ¼å¼
SELECT inspection_date FROM coal_quality_inspection LIMIT 1;

-- è°ƒæ•´æ—¶é—´æ ¼å¼
UPDATE coal_quality_inspection 
SET inspection_date = STR_TO_DATE(inspection_date, '%Y-%m-%d %H:%i:%s')
WHERE inspection_date IS NOT NULL;
```

## ğŸ“Š å¯¼å…¥åæ•°æ®ç»Ÿè®¡

### é¢„æœŸæ•°æ®é‡
- **è´¨é‡æ£€æµ‹é¡¹ç›®**ï¼š7æ¡
- **è´¨é‡æ ‡å‡†**ï¼š8æ¡
- **è´¨é‡æ£€æµ‹è®°å½•**ï¼š24æ¡
- **è´¨é‡æ£€æµ‹æ•°æ®**ï¼š42æ¡
- **è´¨é‡é¢„è­¦è®°å½•**ï¼š7æ¡

### æ•°æ®åˆ†å¸ƒ
- **æ­£å¸¸æ•°æ®**ï¼š35æ¡ï¼ˆ83.3%ï¼‰
- **å¼‚å¸¸æ•°æ®**ï¼š7æ¡ï¼ˆ16.7%ï¼‰
- **å·²å¤„ç†é¢„è­¦**ï¼š7æ¡ï¼ˆ100%ï¼‰

## ğŸ¯ å¯¼å…¥å®Œæˆåçš„æ“ä½œ

### 1. åŠŸèƒ½æµ‹è¯•
- æµ‹è¯•æ£€æµ‹é¡¹ç›®ç®¡ç†åŠŸèƒ½
- æµ‹è¯•è´¨é‡æ ‡å‡†ç®¡ç†åŠŸèƒ½
- æµ‹è¯•æ£€æµ‹è®°å½•ç®¡ç†åŠŸèƒ½
- æµ‹è¯•é¢„è­¦ç®¡ç†åŠŸèƒ½

### 2. æ•°æ®æŸ¥è¯¢æµ‹è¯•
- æµ‹è¯•æŒ‰æ—¶é—´æŸ¥è¯¢
- æµ‹è¯•æŒ‰ç­æ¬¡æŸ¥è¯¢
- æµ‹è¯•æŒ‰äº§å“ç±»å‹æŸ¥è¯¢
- æµ‹è¯•æŒ‰ç³»ç»Ÿä½ç½®æŸ¥è¯¢

### 3. ä¸šåŠ¡æµç¨‹æµ‹è¯•
- æµ‹è¯•æ£€æµ‹è®°å½•åˆ›å»ºæµç¨‹
- æµ‹è¯•æ£€æµ‹æ•°æ®å½•å…¥æµç¨‹
- æµ‹è¯•å®¡æ ¸æµç¨‹
- æµ‹è¯•é¢„è­¦å¤„ç†æµç¨‹

---

*æŒ‰ç…§æœ¬æŒ‡å—æ“ä½œï¼Œå¯ä»¥é¡ºåˆ©å®Œæˆç…¤è´¨ç®¡ç†æ¨¡å—çš„æ¨¡æ‹Ÿæ•°æ®å¯¼å…¥ï¼Œä¸ºç³»ç»Ÿæµ‹è¯•å’Œæ¼”ç¤ºæä¾›æ•°æ®æ”¯æŒã€‚*
